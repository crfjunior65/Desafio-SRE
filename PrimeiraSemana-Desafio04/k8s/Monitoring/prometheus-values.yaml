---
# prometheus-values.yaml
## Configurações detalhadas do Prometheus

# Configuração do Prometheus Server
server:
  # Recursos (CPU/Memória)
  resources:
    requests:
      memory: 512Mi
      cpu: 500m
    limits:
      memory: 1Gi
      cpu: 1000m

  # Persistência de dados
  persistentVolume:
    enabled: true
    size: 10Gi

  # Retenção de dados (quanto tempo guardar métricas)
  retention: 15d

  # Configurações de scrape (coleta)
  global:
    scrape_interval: 15s
    evaluation_interval: 15s

  # Config extra
  extraArgs:
    - 'web.enable-lifecycle'
    - 'storage.tsdb.retention.time=15d'

  # Service para expor Prometheus
  service:
    type: NodePort
    nodePort: 30090
    port: 9090

# Alertmanager (vamos configurar separadamente depois)
alertmanager:
  enabled: true
  service:
    type: NodePort
    nodePort: 30093

# Pushgateway (para métricas push)
pushgateway:
  enabled: false

# Node Exporter (métricas dos nós)
nodeExporter:
  enabled: true

  # Configurações do Node Exporter
  extraArgs:
    - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)'
    - '--collector.netclass.ignored-devices=^veth.*'
    - '--collector.netdev.device-exclude=^veth.*'

# Configurações do Kube-State-Metrics
kubeStateMetrics:
  enabled: true

  # Recursos
  resources:
    requests:
      memory: 64Mi
      cpu: 50m
    limits:
      memory: 128Mi
      cpu: 100m

# Configurações do Prometheus Operator (se necessário)
prometheusOperator:
  enabled: false

# Configurações de Storage
storageSpec:
  volumeClaimTemplate:
    spec:
      storageClassName: standard
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 10Gi

# Configurações de rede
networkPolicy:
  enabled: false

# RBAC (Role-Based Access Control)
rbac:
  create: true

# ServiceAccount
serviceAccount:
  create: true
  name: prometheus

# Segurança
securityContext:
  fsGroup: 2000
  runAsGroup: 2000
  runAsNonRoot: true
  runAsUser: 1000
